---
layout: post
title: 철수와 영희를 통해 알아보는 HTTPS 기본 개념
categories: [HTTPS]
description: Understanding of HTTPS
keywords: HTTPS, Server, Client
---

### 들어가는 글,

개발자라면 누구나 HTTPS에 대해서 들어 보았을 것입니다. 굳이 개발자가 아니더라도 최근에 정부에서 유해사이트를 전면 차단 하면서 HTTPS를 통해 우회(?)접속까지 막혀 버려 많은 이슈가 되었습니다. (~~실제로 많은 청년들이 길거리에서 시위를 했다는...ㅋㅋㅋ~~)

HTTPS에 대한 기본 개념들을 검색해 보면 아래와 같은 사진들이 자주 등장합니다.

![](/images/posts/https/https-connection-sequence-diagram-968x624.png)

[이미지 출처](https://love2dev.com/blog/how-https-works/)

네트워크에 대한 지식이 어느정도 있으신 분이라면 금방 이해 하시겠지만.. 여전히 복잡해 보이는 건 마찬가지 입니다.

이번 포스트에서는 HTTPS 통신 방법을 철수와 영희를 예시로 들어 알아보려고 합니다.

HTTPS란 Hypertext Transfer Protocol Secure (기존 HTTP에 Secure를 뜻하는 S를 더함)의 약자로 정보를 주고받을때 암호화를 하여 통신하는 방식을 의미합니다.

암호화 통신을 통해 중간에 해커로 부터 데이터를 탈취 당하더라도 내용을 알아볼 수 없다라는 이점이 있으며, 방문하는 블로그 등의 사이트에서 브라우저 정보를 수집 할 때도 HTTP통신에 비해 한정적인 데이터가 수집된다는 이점도 존재합니다.

### 기존의 통신 방법

기존 HTTP통신 방법에서는 암호화가 전혀 이루어지지 않았습니다.

예를 들어, 철수와 영희가 연애편지를 주고받는다고 생각해 보겠습니다. 둘은 아날로스 방식으로 편지를 서로 주고받고 있는데 이 사이를 질투한 민수가 중간에서 편지를 훔쳐(탈취하여) 내용을 보고 수정을 한다면 어떻게 될까요 ?

암호화나 보안 관련 작업이 전혀 이루어지지 않은 편지는 중간에 무슨일이 일어나도 철수와 영희는 이 사실조차 인지하지 못 할 것입니다. 그저 마음이 변해버린 영희를 그리워하는 철수만 남을 뿐.. (ㅠㅠ)

![](/images/posts/https/cholsu-younghee.jpg)

이 문제를 해결하기 위해 등장한 방법이 대칭키 암호화(symmetric key cryptography) 방식입니다.

### 대칭키 암호화

대칭키 암호화 방식은 암호화 하는 키와 복호화 하는 키가 같아서 대칭키라는 이름이 붙었습니다.

편지를 주고받던 철수와 영희는 그들만의 비밀편지를 누군가가 엿보는 것이 우려되기 시작하였습니다. 따라서 둘은 서로가 쓰는 편지를 남들이 알아볼 수 없도록 모든 글자를 3자리 앞에 존재하는 글자로 치환한 다음 편지를 보내고 (암호화) 받았을 때 역시 모든 글자를 3자리 뒤에 존재하는 글자로 치환(복호화)하여 보기로 하였습니다.

예를 들어 D → A, E → B, F → C 이런 식으로 글자를 3자리씩 앞으로 옮긴다면 "secret message"는 "pbzobq jbppxdb"가 될 것입니다.

이렇게 암호화키와 복호화키가 같은 경우를 대칭키 암호화라고 부릅니다.

하지만 위의 방법에는 치명적인 단점이 있습니다. 우선 철수와 영희가 직접적으로 만나지 않는 이상 암호화/복호화 방법을 편지를 통해 주고 받아야 하는데 이 과정에서 이미 민수에게 내용이 노출될 수 있다는 점과 평소 암호학을 공부하던 민수는 이렇게 간단한 암호화 기법은 손쉽게 풀어 버릴 수 도 있기 때문입니다.

따라서 이를 우려한 철수와 영희는 비대칭 암호화(asymmetric key cryptography) 방식을 통하여 서로 비밀 편지를 주고 받도록 합니다..

### 비대칭키 암호화

철수와 영희는 다음와 같은 방법을 생각해 냅니다.

- 철수는 영희에게 아무것도 적혀있지 않는 편지를 먼저 보낸다.
- 영희는 잠겨있지 않는 박스에 박스 열쇠를 넣어 다시 철수에게 보낸다.
- 철수는 박스에 편지를 담은 후 박스를 잠그고 해당 박스를 영희에게 보낸다.
- 영희는 박스를 열어 편지를 확인한다.

위의 방법은 암호화와 복호화의 키가 서로 같지 않기 때문에 비대칭키 암호화라고 불립니다. 왜냐하면 박스를 중간에 가로채어 닫는 데는 성공 하여도 닫혀 있는 박스를 열수는 없기 때문입니다.

여기서 박스는 공개키(public key)가 되는 것이고, 박스를 여는 열쇠는 비공개키(private key)가 됩니다.

### 여기서의 또다른 문제점

이미 눈치채신 분도 계시겠지만 여기서 철수가 박스를 받았을 때 어떻게 영희가 보낸 박스 인지 믿을 수 있을까요 ?

영희는 따라서 자신이 보낸 박스가 맞다는 서명을 함께 동봉하여 철수에게 보내기로 하였습니다.

하지만 영희의 서명을 한번도 본적이 없는 철수는 여전히 민수가 보낸 박스 인지 의심할 수 밖에 없는 상황입니다.

여기서 철수와 영희는 모두가 다 알고, 믿을만한 사람인 선생님께 박스에 서명을 하도록 부탁 하기로 합니다.

선생님은 박스를 받았을 때 영희가 준 것을 확인한 후에야 박스에 서명을 해주기로 약속합니다. 여기서 선생님의 역할을 Certification Authority(CA)라고 부릅니다.

선생님의 서명을 알고 있던 철수는 영희가 보낸 박스가 맞다는 사실에 안도하며 둘만의 안전한(?) 비밀편지를 주고 받을수 있게 되었습니다.

![](/images/posts/https/cholsu-younghee-box.png)

[이미지 출처](http://www.urbanbrush.net/downloads/철수와영희-일러스트-ai-무료다운로드-korean-kids)

### 끝으로,,

HTTPS의 통신 방법을 철수와 영희의 예시로 들어 보았습니다. 실제로 HTTPS가 적용되어 있는 웹페이지에 접속한다면 선생님의 역할 이였던 CA의 서명과 정보가 함께 동봉되어 브라우저로 전달이 됩니다.

HTTP에 비해서 절차가 많고 암호화가 되는 등 웹페이지가 상대적으로 느려지는 단점이 존재합니다. 따라서 실제로는 비대칭키 암호화는 암호화키를 주고 받을때 만 사용됩니다.

긴 글 읽어 주셔서 감사합니다.

잘못된 내용이 있거나 수정해야 할 내용이 있다면 언제든지 알려주세요.!

### Reference

[https://medium.com/free-code-camp/https-explained-with-carrier-pigeons-7029d2193351](https://medium.com/free-code-camp/https-explained-with-carrier-pigeons-7029d2193351)

[https://www.thesslstore.com/blog/what-happens-when-your-ssl-certificate-expires/](https://www.thesslstore.com/blog/what-happens-when-your-ssl-certificate-expires/)

[https://love2dev.com/blog/how-https-works/](https://love2dev.com/blog/how-https-works/)
